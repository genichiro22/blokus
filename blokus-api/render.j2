<!DOCTYPE html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            var a_canvas = $("#a_canvas")[0],
            ctx = a_canvas.getContext("2d");
{% for c in field %}
{% if c.value == 0 %}
            ctx.fillStyle = "white";
{% elif c.value == 1 %}
            ctx.fillStyle = "red"
{% elif c.value == 2 %}
            ctx.fillStyle = "green"
{% elif c.value == 3 %}
            ctx.fillStyle = "blue"
{% elif c.value == 4 %}
            ctx.fillStyle = "yellow"
{% endif %}
            ctx.fillRect({{ 20*(1+c.x) }}, {{ 20*(1+c.y) }}, 20, 20);
            ctx.strokeStyle = "#DDD";
            ctx.lineWidth = 1;
            ctx.strokeRect({{ 20*(c.x + 1) }}, {{ 20*(c.y + 1) }}, 20, 20);
{% endfor %}
            ctx.fillStyle = "black";
{% for i in range(20) %}
            ctx.fillText({{ i }}, 1,{{ 34+20*i }});
            ctx.fillText({{ i }}, {{ 24 + 20*i }}, 16);
{% endfor %}
{% for i in range(4) %}
{% for j in range(4) %}
            ctx.strokeStyle = "#AAA";
            ctx.strokeRect({{ 20+100*i }}, {{ 20+100*j }},100,100);
{% endfor %}
{% endfor %}
        });
    </script>
    <style>
.container {  display: grid;
  grid-template-columns: 450px auto;
  grid-template-rows: 450px auto;
  gap: 2px 2px;
  grid-auto-flow: row;
  grid-template-areas:
    "field pieces"
    "fliprot commit";
}

.field { grid-area: field; }

.fliprot {  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  gap: 5px 5px;
  grid-auto-flow: row;
  grid-template-areas:
    "f0 f1 f2 f3"
    "f4 f5 f6 f7";
  grid-area: fliprot;
}

.f0 { grid-area: f0; }

.f1 { grid-area: f1; }

.f2 { grid-area: f2; }

.f3 { grid-area: f3; }

.f4 { grid-area: f4; }

.f5 { grid-area: f5; }

.f6 { grid-area: f6; }

.f7 { grid-area: f7; }

.pieces { grid-area: pieces; }

.commit { grid-area: commit; }

    </style>
</head>
<body>
    <div class="container">
    <div class="field">
    <canvas width="450" height="430" id="a_canvas">
    </canvas>
    </div>
    <div class="commit">
    <canvas width="450" height="40" style="background-color:#ccc;" id="b_canvas">
    </canvas>
    </div>
    <div class="fliprot">
{% for i in range(8) %}
    <div class="f{{ i }}">
    <canvas width="100" height="100" style="background-color:#ccc;" id="{{ i }}_fliprot">
    </canvas>
    </div>
{% endfor %}
    </div>
    <div class="pieces">
{% for i in range(21) %}
    <div class="p{{ i }}">
    <canvas width="100" height="100" style="background-color:#ccc;" id="{{ i }}_base">
    </canvas>
    </div>
{% endfor %}
    </div>
    </div>
    <script>
    function b_func() {
        var cs_a = document.getElementById('a_canvas');
        var cs_b = document.getElementById('b_canvas');
        var ctx_b = cs_b.getContext('2d');
        var ctx_a = cs_a.getContext('2d');
        function onClick(e) {
            var button = e.target.getBoundingClientRect();
	        mouseX = e.clientX - button.left;
    		mouseY = e.clientY - button.top;
            x = Math.floor(mouseX/20) - 1
            y = Math.floor(mouseY/20) - 1
            draw(x, y);
        }
        function draw(s1, s2) {
            ctx_b.clearRect(10,0,400,50);
            ctx_b.fillText(x,100,15);
            ctx_b.fillText(y,150,15);
        }
        function drawRect(x, y) {
            ctx_a.
        }
        cs_a.addEventListener('click', onClick);
    }
    b_func();
    </script>
</body>
</html>